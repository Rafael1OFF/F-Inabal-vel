<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>A Fé Inabalável | Plataforma de Formação</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=Merriweather:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

    <style>
        /* BASE & VARIÁVEIS PARA UM DESIGN PREMIUM E SÓBRIO */
        :root {
            --bg-color: #f8fafc; --surface: #ffffff; --sidebar-bg: #0f172a;
            --text-main: #334155; --text-heading: #0f172a;
            --primary: #b45309; --primary-hover: #92400e;
            --secondary: #1e293b; --border: #e2e8f0;
            --danger: #b91c1c; --success: #15803d;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Inter', sans-serif; background-color: var(--bg-color); color: var(--text-main); line-height: 1.8; -webkit-font-smoothing: antialiased; }

        /* TELA DE LOGIN / ACESSO */
        #login-screen { position: fixed; inset: 0; background: var(--sidebar-bg); z-index: 9999; display: flex; align-items: center; justify-content: center; padding: 2rem; overflow-y: auto; }
        .login-box { background: var(--surface); max-width: 500px; width: 100%; padding: 4rem 3rem; border-radius: 12px; box-shadow: 0 25px 50px -12px rgba(0,0,0,0.5); text-align: center; }
        .login-box h1 { font-family: 'Merriweather', serif; font-size: 2.2rem; color: var(--text-heading); margin-bottom: 0.5rem; }
        .login-box p { color: #64748b; margin-bottom: 2.5rem; font-size: 1.1rem; }
        .form-group { margin-bottom: 1.5rem; text-align: left; }
        .form-group label { display: block; font-weight: 800; margin-bottom: 0.5rem; color: var(--secondary); text-transform: uppercase; font-size: 0.9rem; letter-spacing: 0.5px; }
        .form-group input { width: 100%; padding: 1.2rem; border: 2px solid var(--border); border-radius: 8px; font-size: 1.1rem; font-family: 'Inter', sans-serif; transition: border-color 0.3s; }
        .form-group input:focus { outline: none; border-color: var(--primary); }
        .btn-login { background: var(--primary); color: white; border: none; padding: 1.2rem; width: 100%; border-radius: 8px; font-size: 1.1rem; font-weight: 800; cursor: pointer; text-transform: uppercase; letter-spacing: 1px; margin-top: 1rem; }

        /* ESTRUTURA RESPONSIVA DO CURSO */
        #app-layout { display: none; flex-direction: column; min-height: 100vh; }

        /* HEADER MOBILE */
        .mobile-header { display: none; background: var(--sidebar-bg); color: white; padding: 1rem 1.5rem; align-items: center; justify-content: space-between; position: sticky; top: 0; z-index: 50; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); }
        .menu-toggle { background: none; border: 1px solid rgba(255,255,255,0.3); color: white; padding: 0.4rem 0.8rem; border-radius: 4px; font-size: 0.8rem; font-weight: 800; cursor: pointer; text-transform: uppercase; }

        /* SIDEBAR */
        .sidebar { width: 280px; background-color: var(--sidebar-bg); color: white; height: 100vh; position: fixed; left: 0; top: 0; padding: 2rem 1.5rem; overflow-y: auto; transition: transform 0.3s ease; z-index: 40; display: flex; flex-direction: column; }
        .sidebar-header { border-bottom: 1px solid #334155; padding-bottom: 1.5rem; margin-bottom: 2rem; }
        .sidebar-header h2 { font-size: 1.2rem; font-weight: 800; letter-spacing: 1px; color: #f8fafc; text-transform: uppercase; }
        .sidebar-header span { color: var(--primary); font-size: 0.85rem; font-weight: 600; display: block; margin-top: 0.5rem; }
        
        .student-info { background: #1e293b; padding: 1rem; border-radius: 8px; margin-bottom: 2rem; font-size: 0.9rem; border-left: 3px solid var(--primary); }
        .student-info strong { display: block; color: white; font-size: 1rem; }

        .nav-btn { display: block; width: 100%; text-align: left; background: transparent; color: #94a3b8; border: none; padding: 1rem; margin-bottom: 0.5rem; border-radius: 8px; font-size: 0.95rem; font-weight: 600; cursor: pointer; transition: all 0.2s; }
        .nav-btn:hover:not(.locked) { background: rgba(255,255,255,0.05); color: white; }
        .nav-btn.active { background: var(--primary); color: white; }
        .nav-btn.locked { opacity: 0.4; cursor: not-allowed; }
        
        .sync-box { margin-top: auto; padding-top: 2rem; text-align: center; }
        .sync-code-display { background: black; color: #10b981; padding: 0.8rem; border-radius: 4px; font-family: monospace; font-size: 0.8rem; font-weight: bold; margin-top: 0.5rem; word-break: break-all; }

        /* CONTEÚDO PRINCIPAL */
        .main-content { margin-left: 280px; padding: 4rem; max-width: 1000px; width: 100%; margin-right: auto; }
        .module-section { display: none; animation: fadeIn 0.5s ease; }
        .module-section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* TIPOGRAFIA DO TEXTO */
        .kicker { font-size: 0.9rem; color: var(--primary); font-weight: 800; text-transform: uppercase; letter-spacing: 1.5px; display: block; margin-bottom: 0.5rem; }
        h1 { font-family: 'Merriweather', serif; font-size: 2.8rem; color: var(--text-heading); line-height: 1.3; margin-bottom: 2rem; }
        h2 { font-size: 1.8rem; color: var(--secondary); margin: 4rem 0 1.5rem; padding-bottom: 0.5rem; border-bottom: 2px solid var(--border); }
        p { font-size: 1.15rem; margin-bottom: 1.8rem; color: #475569; text-align: justify; }

        /* CAIXAS BÍBLICAS NVI */
        .bible-box { background: #fffbeb; border-left: 4px solid var(--primary); padding: 2.5rem; margin: 3rem 0; border-radius: 0 12px 12px 0; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.05); }
        .bible-text { font-family: 'Merriweather', serif; font-size: 1.3rem; font-style: italic; color: #1e293b; line-height: 1.7; }
        .bible-ref { display: block; margin-top: 1.5rem; font-family: 'Inter', sans-serif; font-size: 0.9rem; font-weight: 800; color: var(--primary); text-transform: uppercase; letter-spacing: 1px; }

        /* PASSO A PASSO (NOVO DESIGN) */
        .step-box { background: #f8fafc; border: 1px solid var(--border); border-top: 4px solid var(--secondary); border-radius: 8px; padding: 2.5rem; margin: 3rem 0; box-shadow: 0 10px 15px -3px rgba(0,0,0,0.05); }
        .step-box h4 { color: var(--secondary); font-size: 1.3rem; margin-bottom: 1.5rem; text-transform: uppercase; letter-spacing: 1px; font-weight: 800; border-bottom: 1px solid var(--border); padding-bottom: 1rem; }
        .step-list { list-style-type: none; counter-reset: step-counter; margin-left: 0; }
        .step-list li { counter-increment: step-counter; margin-bottom: 1.8rem; position: relative; padding-left: 3.5rem; font-size: 1.1rem; color: #334155; text-align: justify; }
        .step-list li:last-child { margin-bottom: 0; }
        .step-list li::before { content: counter(step-counter); position: absolute; left: 0; top: 0; background: var(--secondary); color: white; width: 2.2rem; height: 2.2rem; border-radius: 4px; display: flex; align-items: center; justify-content: center; font-size: 1rem; font-weight: 800; }
        .step-list li strong { color: var(--text-heading); display: block; margin-bottom: 0.5rem; font-size: 1.15rem; }

        /* BOTÕES DE AVALIAÇÃO */
        .btn { background: var(--primary); color: white; border: none; padding: 1.2rem 2rem; border-radius: 8px; font-size: 1.1rem; font-weight: 800; cursor: pointer; transition: all 0.3s; width: 100%; display: block; text-align: center; margin-top: 4rem; text-transform: uppercase; letter-spacing: 1px; }
        .btn-success { background: var(--success); margin-top: 1rem; }
        
        /* TELA DE AVALIAÇÃO E RESULTADOS */
        #eval-modal { display: none; position: fixed; inset: 0; background: var(--bg-color); z-index: 100; overflow-y: auto; padding: 2rem 1rem; }
        .eval-container { max-width: 800px; margin: 0 auto; background: var(--surface); border-radius: 12px; padding: 3rem; border: 1px solid var(--border); box-shadow: 0 25px 50px -12px rgba(0,0,0,0.1); }
        .question-card { margin-bottom: 2.5rem; padding-bottom: 2rem; border-bottom: 1px solid var(--border); }
        .question-title { font-size: 1.2rem; font-weight: 600; color: var(--secondary); margin-bottom: 1.5rem; line-height: 1.5; }
        .option-lbl { display: flex; align-items: flex-start; padding: 1.2rem; margin-bottom: 0.8rem; background: #f8fafc; border: 1px solid var(--border); border-radius: 8px; cursor: pointer; font-size: 1.05rem; line-height: 1.5; }
        .option-lbl input { margin-right: 15px; margin-top: 5px; width: 20px; height: 20px; accent-color: var(--primary); flex-shrink: 0; }

        /* ESTILO DOS RESULTADOS */
        .result-card { background: white; border: 1px solid var(--border); border-radius: 8px; padding: 2rem; margin-bottom: 2rem; box-shadow: 0 4px 6px rgba(0,0,0,0.05); }
        .result-header { border-bottom: 2px solid #e2e8f0; padding-bottom: 1rem; margin-bottom: 1.5rem; }
        .result-score { font-size: 2rem; font-weight: 800; color: var(--primary); }
        .result-q { font-weight: 600; margin-bottom: 0.5rem; margin-top: 1.5rem; }
        .result-a.correct { color: var(--success); font-weight: bold; background: #f0fdf4; padding: 0.5rem; border-radius: 4px; }
        .result-a.incorrect { color: var(--danger); font-weight: bold; background: #fef2f2; padding: 0.5rem; border-radius: 4px; }

        /* CERTIFICADO INVISÍVEL (Para Gerar PDF) */
        #certificado-wrapper { display: none; padding: 40px; background: white; width: 1123px; height: 794px; position: absolute; left: -9999px; top: 0; }
        .certificado-content { border: 10px solid var(--secondary); padding: 50px; text-align: center; height: 100%; border-radius: 10px; background: #f8fafc; position: relative; }
        .cert-title { font-family: 'Merriweather', serif; font-size: 4rem; color: var(--primary); text-transform: uppercase; letter-spacing: 5px; margin-top: 30px; }
        .cert-subtitle { font-size: 1.5rem; color: #64748b; margin-top: 10px; letter-spacing: 2px; }
        .cert-name { font-family: 'Merriweather', serif; font-size: 3.5rem; font-weight: bold; color: var(--text-heading); margin: 60px 0; border-bottom: 2px solid var(--primary); display: inline-block; padding: 0 50px; }
        .cert-body { font-size: 1.5rem; color: #334155; max-width: 800px; margin: 0 auto; line-height: 1.8; }
        .cert-footer { position: absolute; bottom: 50px; width: 100%; left: 0; display: flex; justify-content: space-around; font-size: 1.2rem; color: var(--secondary); font-weight: bold; }
        .cert-signature { border-top: 2px solid var(--secondary); padding-top: 10px; width: 300px; }

        /* RESPONSIVIDADE */
        @media (max-width: 768px) {
            .mobile-header { display: flex; }
            .sidebar { transform: translateX(-100%); width: 280px; }
            .sidebar.open { transform: translateX(0); box-shadow: 4px 0 15px rgba(0,0,0,0.5); }
            .main-content { margin-left: 0; padding: 2rem 1.5rem; }
            h1 { font-size: 2.2rem; }
            .login-box { padding: 2.5rem 1.5rem; }
            .eval-container { padding: 1.5rem; }
        }
    </style>
</head>
<body>

    <div id="login-screen">
        <div class="login-box">
            <h1>A FÉ INABALÁVEL</h1>
            <p>Formação de Caráter e Teologia</p>
            
            <div class="form-group">
                <label>Seu Nome Completo (Conforme Certificado)</label>
                <input type="text" id="login-nome" placeholder="Ex: Rafael Andrade dos Santos" required>
            </div>
            <div class="form-group">
                <label>Sua Função na Igreja</label>
                <input type="text" id="login-funcao" placeholder="Ex: Membro, Líder, Pastor" required>
            </div>
            <div class="form-group" style="margin-top: 2rem; padding-top: 1.5rem; border-top: 1px solid #e2e8f0;">
                <label style="color: #64748b;">Chave de Acesso Criptografada (Opcional)</label>
                <input type="text" id="login-chave" placeholder="Cole sua chave gerada anteriormente aqui">
            </div>
            
            <p id="login-err" style="color: var(--danger); font-weight: 800; display: none; margin-top: 1rem;"></p>
            <button class="btn-login" onclick="entrarNoCurso()">Acessar Plataforma</button>
        </div>
    </div>

    <div id="app-layout" class="layout">
        <header class="mobile-header">
            <span style="font-weight: 800; font-size: 1.2rem;">A FÉ INABALÁVEL</span>
            <button class="menu-toggle" onclick="toggleMenu()">MENU</button>
        </header>

        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h2>O Caminho</h2>
                <span>Formação de Caráter</span>
            </div>
            
            <div class="student-info">
                Aluno: <strong id="display-nome">Nome</strong>
                Função: <span id="display-funcao" style="color:#94a3b8;">Função</span>
            </div>

            <nav>
                <button id="nav-mod-disciplina" class="nav-btn active" onclick="switchTab('mod-disciplina')">1. A Disciplina</button>
                <button id="nav-mod-conhecimento" class="nav-btn locked" onclick="switchTabIfUnlocked('mod-conhecimento', this)">2. Conhecimento (Bloqueado)</button>
                <button id="nav-mod-conviccao" class="nav-btn locked">3. Convicção Racional (Em breve)</button>
                <button id="nav-mod-constancia" class="nav-btn locked">4. Constância (Em breve)</button>
                <hr style="border: 0; border-top: 1px solid #334155; margin: 15px 0;">
                <button id="nav-mod-resultados" class="nav-btn" onclick="switchTab('mod-resultados')" style="color: #cbd5e1; font-weight: bold;">Resultados e Provas</button>
                <button id="nav-mod-exame" class="nav-btn locked" onclick="switchTabIfUnlocked('mod-exame', this)" style="background: var(--danger); color: white;">Exame Final (Bloqueado)</button>
            </nav>

            <div class="sync-box">
                <span style="font-size: 0.8rem; color: #94a3b8; text-transform: uppercase; font-weight: bold;">Chave Anti-Fraude Gerada</span>
                <div class="sync-code-display" id="display-chave">NENHUMA</div>
                <p style="font-size: 0.75rem; color: #64748b; margin-top: 0.5rem; line-height: 1.3;">Sua chave é ligada à biometria do seu nome. Use-a na tela de login de outro aparelho para continuar.</p>
            </div>
        </aside>

        <main class="main-content">
            
            <section id="mod-disciplina" class="module-section active">
                <span class="kicker">Pilar 01</span>
                <h1>A Forja da Disciplina: Onde o Caráter é Moldado</h1>
                
                <p>Muitos cristãos desejam viver o extraordinário de Deus, mas fogem do processo ordinário que os prepara para isso. Buscam atalhos. Querem a unção sem a oração profunda; querem a sabedoria sem a leitura exaustiva; querem o domínio próprio sem nunca dizer "não" à própria carne. Mas a verdade nua e crua é que uma Fé Inabalável não nasce do acaso, nem cai do céu pronta. Ela é forjada a duras penas.</p>

                <p>A disciplina é o calor, é a bigorna e é o martelo usados pelo Espírito Santo para transformar o seu potencial bruto em uma arma de guerra nas mãos de Deus. Se você falhar aqui e se render à preguiça, todo o resto do curso será apenas conhecimento intelectual inútil.</p>

                <h2>1. A Etimologia da Correção e a Falsa Motivação</h2>
                <p>A palavra "disciplina" assusta o cristão moderno porque soa como opressão. No entanto, no Antigo Testamento, a palavra hebraica primária traduzida como disciplina é <strong>Musar</strong>. Ela significa instrução moral, correção amorosa de um pai para um filho e a formação de limites que protegem a vida.</p>
                <p>No Novo Testamento grego, o termo equivalente é <strong>Paideia</strong>. Na cultura da época, paideia era o sistema educacional rigoroso que transformava um menino inculto em um cidadão grego pleno, capaz de liderar e combater no exército. A disciplina de Deus é o programa de treinamento militar do Reino dos Céus.</p>
                <p>A motivação é baseada na emoção. É aquele sentimento intenso após um culto poderoso. O problema da motivação é que ela é escrava das circunstâncias. A disciplina, por outro lado, é um compromisso baseado na <strong>convicção racional</strong>. Quando a motivação te abandonar em uma manhã fria e chuvosa, é a disciplina que vai te arrancar da cama e te colocar de joelhos.</p>

                <div class="bible-box">
                    <p class="bible-text">"Quem ama a disciplina ama o conhecimento, mas o que odeia a repreensão é tolo."</p>
                    <span class="bible-ref">Provérbios 12:1 (NVI 2020)</span>
                </div>

                <div class="step-box">
                    <h4>Passo a Passo: Vencendo a Falsa Motivação</h4>
                    <ul class="step-list">
                        <li><strong>Identifique a área de falência:</strong> Anote em um papel qual área da sua vida espiritual você só faz quando "sente vontade" (exemplo: leitura da Palavra diária, tempo de oração, jejum).</li>
                        <li><strong>Estabeleça o "Mínimo Inegociável":</strong> Defina uma meta pequena, mas absoluta e inflexível. Exemplo: "Lerei 1 capítulo da Bíblia por dia, independentemente do meu humor, do meu cansaço ou do meu trabalho".</li>
                        <li><strong>A Regra dos 5 Segundos:</strong> Quando o alarme tocar para o seu devocional e a preguiça atacar sua mente, conte de 5 até 1 e levante-se imediatamente. Não negocie com a sua própria mente. A mente carnal sempre argumentará a favor do conforto. Aja antes que ela te convença.</li>
                    </ul>
                </div>

                <h2>2. O Treinamento do Atleta e a Subjugação da Carne</h2>
                <p>O apóstolo Paulo utiliza a imagem brutal dos esportes de combate para ilustrar a vida do cristão. Nos Jogos Ístmicos da Grécia Antiga, os atletas passavam por 10 meses de treinamento rigorosíssimo, abdicando de dietas pesadas, festas e conforto, apenas para ganhar uma coroa de folhas que murchava em poucos dias.</p>

                <div class="bible-box">
                    <p class="bible-text">"Todos os que competem nos jogos se submetem a um treinamento rigoroso... Mas esmurro o meu próprio corpo e faço dele meu escravo, para que, depois de ter pregado aos outros, eu mesmo não venha a ser reprovado."</p>
                    <span class="bible-ref">1 Coríntios 9:25-27 (NVI 2020)</span>
                </div>

                <p>O termo <em>"esmurro o meu próprio corpo e faço dele meu escravo"</em> é fortíssimo. Paulo não está falando de autoflagelação ou agressão física, mas de <strong>subjugação da vontade</strong>. A sua carne tem voz e exige coisas: ela quer dormir até tarde, quer rolar o feed do celular infinitamente recebendo dopamina barata, quer reagir com raiva e gritaria a uma ofensa em casa. A disciplina cristã é a capacidade de agarrar essa vontade carnal pelo pescoço e dizer: "Quem manda na minha rotina e nas minhas reações é o Espírito Santo habitando em mim, e não os meus impulsos biológicos".</p>

                <div class="step-box">
                    <h4>Passo a Passo: Subjugando a Carne (O Jejum de Prazeres Lícitos)</h4>
                    <ul class="step-list">
                        <li><strong>Escolha um "prazer lícito":</strong> Identifique algo que não é pecado, mas que consome seu tempo e controla seu corpo. Pode ser café, açúcar, redes sociais, televisão ou jogos.</li>
                        <li><strong>Determine um período de corte:</strong> Estabeleça que, durante os próximos 7 dias, você não consumirá absolutamente nada deste item. Você vai informar ao seu corpo que ele não governa suas decisões.</li>
                        <li><strong>O Redirecionamento da Frustração:</strong> Toda vez que a abstinência bater forte e o seu corpo exigir aquele prazer, feche os olhos por 1 minuto e faça uma oração objetiva: "Senhor, meu espírito tem mais fome e dependência de Ti do que o meu corpo tem disso". Esse exercício fortalece o músculo do autocontrole emocional e espiritual.</li>
                    </ul>
                </div>

                <button class="btn" onclick="iniciarProva('disciplina')">Realizar Prova do Pilar 1</button>
            </section>

            <section id="mod-conhecimento" class="module-section">
                <span class="kicker">Pilar 02</span>
                <h1>Conhecimento: A Fundação Racional da Fé</h1>
                
                <p>A disciplina pavimentou a estrada. Agora precisamos construir sobre ela. O segundo pilar da Fé Inabalável é o <strong>Conhecimento</strong>. Existe um mito profundamente destrutivo (e popular) na igreja moderna de que a fé é um salto no escuro, ilógica, cega e baseada apenas em emoções que sentimos durante os cultos de domingo.</p>

                <p>A Bíblia repudia essa ideia completamente. A verdadeira fé exige uma mente iluminada pela Palavra. Uma fé que não se fundamenta no conhecimento teológico correto de quem Deus é, das Suas alianças, do contexto histórico das Escrituras e da doutrina básica, é uma fé de papelão. Ela será rasgada pelo primeiro argumento filosófico sofisticado na faculdade, ou pela primeira tragédia de saúde que atingir sua família.</p>

                <div class="bible-box">
                    <p class="bible-text">"Meu povo foi destruído por falta de conhecimento. Uma vez que vocês rejeitaram o conhecimento, eu também os rejeito como meus sacerdotes."</p>
                    <span class="bible-ref">Oséias 4:6 (NVI 2020)</span>
                </div>

                <h2>1. Muito Além da Informação: O Verdadeiro Ginosko</h2>
                <p>É vital entender que, quando a Bíblia exige conhecimento, ela não está pedindo acúmulo de dados para você vencer debates teológicos na internet ou demonstrar orgulho intelectual (isso é farisaísmo letal). No hebraico do Antigo Testamento, a palavra <em>Yada</em>, e no grego do Novo Testamento, <em>Ginosko</em>, significam um <strong>conhecimento relacional profundo, íntimo e de primeira mão</strong>.</p>
                <p>É impossível você confiar totalmente sua vida, sua família e suas finanças a um desconhecido. A fé nasce da confiança, e a confiança nasce do conhecimento. Como você pode descansar na providência de Deus se você nunca estudou e compreendeu a fundo como Ele libertou o povo do Egito e os sustentou no deserto árido? O conhecimento abastece o motor da fé, dando a ela fatos inegáveis sobre o caráter de Deus para se apoiar quando o medo bater.</p>

                <div class="step-box">
                    <h4>Passo a Passo: Transformando Informação em Relacionamento</h4>
                    <ul class="step-list">
                        <li><strong>O Método da Pergunta Textual:</strong> Ao ler um capítulo da Bíblia, não leia correndo apenas para cumprir sua meta diária e fechar o livro. Pare, pegue um caderno, e obrigue-se a responder três perguntas cruciais sobre o texto:</li>
                        <li><strong>Busque o Caráter de Deus:</strong> O que este texto me ensina especificamente sobre quem Deus é? (Ele se revelou como um juiz severo neste capítulo? Como um provedor? Como um pai misericordioso mas que não tolera a idolatria?)</li>
                        <li><strong>Oração Fundamentada na Palavra:</strong> Transforme o que você acabou de extrair do texto em oração. Exemplo: se leu sobre Deus abrindo o Mar Vermelho para Moisés, não faça uma oração vazia. Ore com embasamento: "Senhor, conhecendo a Tua soberania histórica sobre a natureza e como abriste o mar quando não havia saída humana para Israel, eu entrego a minha crise financeira atual nas Tuas mãos, sabendo que és o mesmo Deus".</li>
                    </ul>
                </div>

                <h2>2. A Palavra Completa Contra as Meias Verdades do Diabo</h2>
                <p>A ignorância bíblica é o playground predileto de Satanás. Veja o exemplo supremo do próprio Jesus Cristo no deserto. Quando Jesus estava exausto, desidratado e vulnerável após 40 dias de jejum no deserto da Judeia, Satanás não O atacou enviando demônios visíveis e assustadores ou possessões cinematográficas; o Diabo O atacou com <strong>distorções intelectuais da própria Bíblia</strong>.</p>
                <p>No clímax da tentação, Satanás teve a audácia de citar o Livro de Salmos (Salmo 91) e usá-lo fora de contexto para induzir Jesus a pecar. Satanás disse: "Se você é o Filho de Deus, jogue-se daqui para baixo. Pois está escrito: 'Ele dará ordens a seus anjos a seu respeito, e com as mãos eles o segurarão...'" (Mateus 4:6).</p>
                
                <p>O que Jesus fez? Ele não chamou um exército de anjos. Ele não usou poderes cósmicos. Ele puxou a espada do Conhecimento teológico completo e inquebrável. Jesus sabia que o Diabo estava isolando um versículo da Bíblia para justificar o pecado do orgulho e da presunção de testar Deus. E quem tem conhecimento não é enganado por meia verdade. Jesus respondeu fechando a lacuna que Satanás abriu, citando o livro de Deuteronômio.</p>

                <div class="bible-box">
                    <p class="bible-text">"Jesus lhe respondeu: 'Também está escrito: Não ponha à prova o Senhor, o seu Deus'."</p>
                    <span class="bible-ref">Mateus 4:7 referenciando Deuteronômio 6:16 (NVI 2020)</span>
                </div>

                <p>Para quem está novo na fé, a lição grita nesta passagem: <strong>Texto fora de contexto é pretexto para heresia.</strong> Se o próprio Verbo encarnado precisou ter o conhecimento total das Escrituras guardado em Sua mente para não ser enganado e vencer a tentação, o que faz você pensar que vencerá as batalhas e as depressões da sua vida apenas com emoções?</p>

                <div class="step-box">
                    <h4>Passo a Passo: O Estudo Expositivo e o Espírito Bereano</h4>
                    <ul class="step-list">
                        <li><strong>Abandone a Leitura Mágica e Aleatória:</strong> Pare de abrir a Bíblia no meio, fechar os olhos, apontar o dedo e esperar tirar a sorte de um versículo bom. Isso é misticismo e ofende a inteligência das Escrituras. A Bíblia é uma biblioteca. Escolha um livro inteiro (comece pelo Evangelho de João ou pela carta aos Romanos) e leia sequencialmente do capítulo 1 ao último.</li>
                        <li><strong>Seja como os Bereanos:</strong> O livro de Atos 17:11 diz que a igreja da cidade de Bereia tinha "caráter nobre" porque, mesmo ouvindo as pregações do maior apóstolo que já existiu (Paulo), eles não aceitavam as coisas cegamente. Eles iam para casa "examinar as Escrituras todos os dias para ver se o que Paulo dizia era verdade". Não engula teologia enlatada da internet.</li>
                        <li><strong>Equipe seu Arsenal Mental:</strong> Escolha 3 versículos chaves que combatem diretamente o seu pior defeito (medo, ira, vícios). Escreva-os em papéis e cole-os onde você vê todos os dias (espelho, painel do carro). Leia em voz alta até memorizar. Quando a provação chegar, você terá a mesma arma que Cristo teve para dizer: "Está escrito".</li>
                    </ul>
                </div>

                <button class="btn" onclick="iniciarProva('conhecimento')">Realizar Prova do Pilar 2</button>
            </section>

            <section id="mod-resultados" class="module-section">
                <h1>Boletim e Avaliações</h1>
                <p>O seu histórico de avaliações fica armazenado localmente nesta página. O caráter não teme a verdade. Analise seus acertos e erros abaixo para corrigir sua rota.</p>
                <div id="resultados-lista">
                    <p style="color: #64748b; font-style: italic;">Nenhuma prova foi realizada ainda.</p>
                </div>
            </section>

            <section id="mod-exame" class="module-section">
                <h1>O Exame da Forja Final</h1>
                <p>Você chegou ao fim da fundamentação. Este exame contém 30 perguntas vitais que percorrem todos os pilares ensinados.</p>
                <div class="step-box">
                    <h4>Atenção às Regras:</h4>
                    <ul class="step-list">
                        <li>A nota de corte para a certificação é de <strong>85% de acerto</strong>.</li>
                        <li>Se você falhar, precisará revisar o material e refazer o exame inteiro do zero.</li>
                        <li>Se aprovado, o sistema emitirá automaticamente o seu PDF de Certificado Oficial.</li>
                    </ul>
                </div>
                <button class="btn btn-success" onclick="iniciarExameFinal()">Iniciar Exame Final (30 Questões)</button>
            </section>

        </main>
    </div>

    <div id="eval-modal">
        <div class="eval-container" id="eval-quiz-stage">
            <h2 id="quiz-titulo" style="font-family: 'Merriweather', serif; font-size: 2rem; margin-bottom: 2rem; border-bottom: 2px solid var(--border); padding-bottom: 1rem;">Prova em Andamento</h2>
            <div id="quiz-render-area"></div>
            
            <p id="quiz-err" style="color: var(--danger); font-weight: 800; display: none; text-align: center; margin-top: 1rem; font-size: 1.1rem;">Erro: Você não pode deixar questões em branco.</p>
            <button class="btn" id="btn-finalizar-prova" onclick="finalizarProvaLocal()">Salvar Resultados no Boletim</button>
            <button class="btn" style="background: transparent; border: 2px solid var(--border); color: var(--secondary); margin-top: 1rem;" onclick="closeEval()">Cancelar e Voltar ao Estudo</button>
        </div>
    </div>

    <div id="certificado-wrapper">
        <div class="certificado-content">
            <h1 class="cert-title">A FÉ INABALÁVEL</h1>
            <p class="cert-subtitle">FORMAÇÃO DE CARÁTER E TEOLOGIA</p>
            <h2 class="cert-name" id="cert-nome-display">NOME DO ALUNO</h2>
            <p class="cert-body">
                Certificamos para os devidos fins que o(a) aluno(a) acima, exercendo a função de <strong><span id="cert-funcao-display"></span></strong>, foi aprovado(a) com excelência no Exame Final do curso <strong>A FÉ INABALÁVEL</strong>, demonstrando domínio intelectual e disposição prática sobre os pilares da Disciplina e do Conhecimento Bíblico (Yada/Ginosko).<br><br>
                <em>"Produz fruto de justiça e paz para aqueles que por ela foram exercitados." (Hb 12:11)</em>
            </p>
            <div class="cert-footer">
                <div class="cert-signature">Instrutor Teológico</div>
                <div class="cert-signature">Supervisão do Curso</div>
            </div>
        </div>
    </div>

    <script>
        let nomeAluno = "";
        let funcaoAluno = "";
        let moduloAtualProva = "";
        let questoesSorteadas = [];
        let historicoResultados = [];
        let isExameFinal = false;

        // BANCO DE QUESTÕES (Profundo)
        const bancoAvaliacoes = {
            disciplina: [
                { q: "Qual o significado da palavra grega 'Paideia'?", opts: ["Um sistema educacional leve focado na teoria.", "O sistema rigoroso que transformava um inculto em um cidadão capaz de liderar e ir para a guerra.", "O modelo de punição romana.", "Uma recompensa dada pelas autoridades."], ans: 1 },
                { q: "Em 1 Coríntios 9, o que significa 'esmurrar o próprio corpo e fazê-lo escravo'?", opts: ["Praticar autoflagelação com castigos corporais.", "A capacidade de agarrar a vontade carnal (preguiça, vícios, ira) e subjugá-la ao Espírito Santo.", "Não cuidar da saúde física e focar no céu.", "Deixar o corpo ditar os horários de sono."], ans: 1 },
                { q: "Qual é a instrução da Regra dos 5 Segundos?", opts: ["Ao soar o alarme devocional, conte de 5 até 1 e levante imediatamente sem negociar com a mente carnal.", "Esperar 5 segundos antes de responder agressivamente.", "Orar 5 segundos antes de comer.", "Fazer leituras rápidas da Bíblia."], ans: 0 },
                { q: "Qual é o objetivo do Jejum de Prazeres Lícitos?", opts: ["Perder peso rapidamente.", "Ao cortar algo lícito, você informa ao seu corpo que ele não governa suas decisões, fortalecendo o autocontrole.", "Mostrar aos outros sua espiritualidade.", "Punição por ter pecado recentemente."], ans: 1 },
                { q: "Qual a diferença entre falsa motivação e verdadeira disciplina?", opts: ["A disciplina depende do culto animado.", "A motivação passa com as circunstâncias, a disciplina é um compromisso baseado em convicção racional com Deus que não depende de humor.", "Não há diferença teológica.", "Só pastores precisam de disciplina."], ans: 1 }
            ],
            conhecimento: [
                { q: "Em Oséias 4:6 e nos termos Yada/Ginosko, a Bíblia exige qual tipo de conhecimento?", opts: ["Conhecimento puramente acadêmico para debates.", "Um conhecimento relacional profundo, íntimo e experimental sobre o caráter de Deus.", "Decorar versículos mecanicamente.", "Um conhecimento místico revelado fora da Bíblia."], ans: 1 },
                { q: "Como Jesus lidou com Satanás distorcendo o Salmo 91 no deserto?", opts: ["Jesus fugiu sem responder.", "Jesus puxou a espada do conhecimento completo e citou Deuteronômio ('Também está escrito'), fechando a mentira.", "Ele invocou raios do céu imediatamente.", "Jesus concordou com Satanás na hora."], ans: 1 },
                { q: "Por que a igreja de Bereia possuía caráter nobre?", opts: ["Eles iam para casa e examinavam as Escrituras diariamente para validar a pregação do apóstolo Paulo.", "Expulsaram Paulo por arrogância.", "Aceitavam tudo de forma passiva.", "Limpavam a igreja perfeitamente."], ans: 0 },
                { q: "Por que a 'Leitura Mágica/Aleatória' é um erro?", opts: ["Porque a Bíblia só deve ser lida domingo.", "A Bíblia é uma biblioteca. Ler versículos soltos fora do contexto original abre margem para dupla interpretação e heresias.", "Dá trabalho achar versículos bons.", "A afirmação é falsa. É o melhor jeito."], ans: 1 },
                { q: "No 'Método da Pergunta Textual', quais perguntas você faz?", opts: ["Quanto tempo demorei para ler?", "O que este texto me ensina especificamente sobre o caráter de Deus e a natureza humana?", "O que o texto diz sobre meus inimigos?", "Nenhuma, apenas feche o livro."], ans: 1 }
            ]
        };

        // --- ENGENHARIA DO ALGORITMO ANTI-FRAUDE ---
        // Pega o nome: Rafael Andrade dos Santos -> ras22
        function gerarAssinatura(nome, moduloNum) {
            let n = nome.trim().toLowerCase();
            let iniciais = n.split(/\s+/).map(p => p.charAt(0)).join('');
            let letras = n.replace(/\s+/g, '').length;
            let codigoBase = `${iniciais}${letras}-${moduloNum}`;
            // Adiciona o "Salt" secreto que impede o aluno de adivinhar o próximo.
            return btoa(codigoBase + "-FORJA2026");
        }

        function extrairModuloDaChave(chaveInput, nomeAtual) {
            try {
                let decodificado = atob(chaveInput);
                if (!decodificado.endsWith("-FORJA2026")) return null;
                
                let partes = decodificado.replace("-FORJA2026", "").split('-');
                let assinBase = partes[0]; // ex: ras22
                let modNum = parseInt(partes[1]);

                // Verificação estrita: A chave tem que bater com o nome digitado na tela!
                let n = nomeAtual.trim().toLowerCase();
                let iniciais = n.split(/\s+/).map(p => p.charAt(0)).join('');
                let letras = n.replace(/\s+/g, '').length;
                let assinaturaEsperada = `${iniciais}${letras}`;

                if (assinBase !== assinaturaEsperada) return null; // Fraude de nome/chave detectada
                return modNum;
            } catch (e) {
                return null;
            }
        }

        // --- INICIALIZAÇÃO E LOGIN ---
        function entrarNoCurso() {
            nomeAluno = document.getElementById('login-nome').value.trim();
            funcaoAluno = document.getElementById('login-funcao').value.trim();
            let chaveInput = document.getElementById('login-chave').value.trim();

            if (!nomeAluno || !funcaoAluno) {
                document.getElementById('login-err').innerText = "Preencha o Nome Completo e a Função.";
                document.getElementById('login-err').style.display = 'block';
                return;
            }

            document.getElementById('display-nome').innerText = nomeAluno;
            document.getElementById('display-funcao').innerText = funcaoAluno;

            let modLiberado = 1;

            if (chaveInput !== "") {
                let check = extrairModuloDaChave(chaveInput, nomeAluno);
                if (check === null) {
                    document.getElementById('login-err').innerText = "Chave Inválida, incompatível com o seu nome ou adulterada.";
                    document.getElementById('login-err').style.display = 'block';
                    return;
                }
                modLiberado = check;
                document.getElementById('display-chave').innerText = chaveInput;
            } else {
                document.getElementById('display-chave').innerText = "NENHUMA";
            }

            // Desbloqueia os módulos baseado na chave
            if (modLiberado >= 2) {
                document.getElementById('nav-mod-conhecimento').classList.remove('locked');
                document.getElementById('nav-mod-conhecimento').innerText = "2. Conhecimento";
            }
            if (modLiberado >= 3) {
                // Aqui no futuro vai o modulo 3
                document.getElementById('nav-mod-exame').classList.remove('locked');
                document.getElementById('nav-mod-exame').innerText = "Exame Final (Liberado)";
            }

            document.getElementById('login-screen').style.display = 'none';
            document.getElementById('app-layout').style.display = 'flex';
        }

        // --- SISTEMA DE PROVAS LOCAL (SEM WHATSAPP) ---
        function iniciarProva(moduloID) {
            isExameFinal = false;
            moduloAtualProva = moduloID;
            document.getElementById('quiz-titulo').innerText = "Avaliação: Pilar " + (moduloID === 'disciplina' ? "1" : "2");
            montarEExibirProva(bancoAvaliacoes[moduloAtualProva]);
        }

        function iniciarExameFinal() {
            isExameFinal = true;
            document.getElementById('quiz-titulo').innerText = "Exame Final de Formação (30 Questões)";
            
            // O sistema do Exame Final pega todas as questões existentes e as clona até dar 30 (para simular a prova de 30)
            // No futuro, teremos bancos separados para os 7 módulos reais.
            let todasAsQuestoes = [...bancoAvaliacoes.disciplina, ...bancoAvaliacoes.conhecimento];
            let poolExame = [];
            
            // Repetindo as perguntas apenas para preencher o requisito visual de 30 questões do sistema EAD.
            while(poolExame.length < 30) {
                let randomQ = todasAsQuestoes[Math.floor(Math.random() * todasAsQuestoes.length)];
                // Clonar objeto para não dar erro no shuffle das alternativas
                poolExame.push(JSON.parse(JSON.stringify(randomQ))); 
            }
            
            montarEExibirProva(poolExame);
        }

        function montarEExibirProva(arrayDeQuestoes) {
            document.getElementById('quiz-err').style.display = 'none';
            const container = document.getElementById('quiz-render-area');
            container.innerHTML = '';
            
            questoesSorteadas = [...arrayDeQuestoes].sort(() => 0.5 - Math.random());

            questoesSorteadas.forEach((qData, qIndex) => {
                let html = `<div class="question-card"><div class="question-title">${qIndex + 1}. ${qData.q}</div>`;
                
                let optsWithIndex = qData.opts.map((optText, origIndex) => ({ text: optText, val: origIndex }));
                optsWithIndex.sort(() => 0.5 - Math.random());

                optsWithIndex.forEach((opt) => {
                    html += `<label class="option-lbl"><input type="radio" name="ans-${qIndex}" value="${opt.val}"> <span>${opt.text}</span></label>`;
                });
                html += `</div>`;
                container.innerHTML += html;
            });
            
            document.getElementById('eval-modal').style.display = 'block';
            document.getElementById('eval-modal').scrollTop = 0;
        }

        function closeEval() { document.getElementById('eval-modal').style.display = 'none'; }

        function finalizarProvaLocal() {
            let acertos = 0;
            let total = questoesSorteadas.length;
            let todasRespondidas = true;
            let detalhamentoHTML = "";

            for (let i = 0; i < total; i++) {
                const selected = document.querySelector(`input[name="ans-${i}"]:checked`);
                if (!selected) { todasRespondidas = false; break; }
                
                let isCorrect = parseInt(selected.value) === questoesSorteadas[i].ans;
                if (isCorrect) {
                    acertos++;
                    detalhamentoHTML += `<div class="result-q">${i + 1}. ${questoesSorteadas[i].q}</div><div class="result-a correct">✅ CORRETA</div>`;
                } else {
                    detalhamentoHTML += `<div class="result-q">${i + 1}. ${questoesSorteadas[i].q}</div><div class="result-a incorrect">❌ INCORRETA (A resposta lida foi errada, revise o texto).</div>`;
                }
            }

            if (!todasRespondidas) { document.getElementById('quiz-err').style.display = 'block'; return; }

            const percent = Math.round((acertos / total) * 100);

            if (isExameFinal) {
                // LOGICA DO EXAME FINAL (85% CORTE E CERTIFICADO)
                if (percent >= 85) {
                    alert(`EXAME FINAL: APROVADO! Você tirou ${percent}%. O sistema irá gerar seu Certificado Oficial em PDF. Confirme as telas seguintes.`);
                    gerarCertificadoPDF();
                } else {
                    alert(`EXAME FINAL: REPROVADO. Você tirou apenas ${percent}%. A nota de corte é 85%. Retorne ao material, estude as escrituras e refaça a prova.`);
                }
                closeEval();
                switchTab('mod-resultados');
                return;
            }

            // --- LÓGICA DE PROVA NORMAL (Módulo 1 e 2) ---
            let tituloMod = moduloAtualProva === 'disciplina' ? "Pilar 1: Disciplina" : "Pilar 2: Conhecimento";
            
            let htmlResultado = `
                <div class="result-card">
                    <div class="result-header">
                        <h3>Avaliação: ${tituloMod}</h3>
                        <div class="result-score">Nota: ${percent}% (${acertos}/${total})</div>
                    </div>
                    ${detalhamentoHTML}
                </div>
            `;
            
            // Salva na lista da aba de Resultados
            const listaResult = document.getElementById('resultados-lista');
            if (listaResult.innerHTML.includes("Nenhuma prova")) { listaResult.innerHTML = ''; }
            listaResult.innerHTML = htmlResultado + listaResult.innerHTML; // Põe no topo

            if (percent >= 60) {
                if (moduloAtualProva === 'disciplina') {
                    document.getElementById('nav-mod-conhecimento').classList.remove('locked');
                    document.getElementById('nav-mod-conhecimento').innerText = "2. Conhecimento";
                    let novaChave = gerarAssinatura(nomeAluno, 2);
                    document.getElementById('display-chave').innerText = novaChave;
                    alert(`Aprovado no Pilar 1! Sua NOVA CHAVE ANTI-FRAUDE foi gerada e copiada na tela lateral. Use-a se for acessar de outro celular. Seus resultados foram salvos no Boletim.`);
                } else if (moduloAtualProva === 'conhecimento') {
                    document.getElementById('nav-mod-exame').classList.remove('locked');
                    document.getElementById('nav-mod-exame').innerText = "Exame Final (Liberado)";
                    let novaChave = gerarAssinatura(nomeAluno, 3);
                    document.getElementById('display-chave').innerText = novaChave;
                    alert(`Aprovado no Pilar 2! O Exame Final de 30 Questões foi Liberado no menu lateral. Sua Chave Evolutiva foi atualizada.`);
                }
            } else {
                alert(`Reprovado. Você tirou ${percent}%. Estude novamente e refaça.`);
            }

            closeEval();
            switchTab('mod-resultados'); // Pula direto para a aba local de resultados
        }

        // --- SISTEMA DO CERTIFICADO PDF ---
        function gerarCertificadoPDF() {
            // Preenche os dados reais na div invisível do Certificado
            document.getElementById('cert-nome-display').innerText = nomeAluno.toUpperCase();
            document.getElementById('cert-funcao-display').innerText = funcaoAluno.toUpperCase();

            // Pega o elemento HTML do certificado
            const element = document.getElementById('certificado-wrapper');
            element.style.display = 'block'; // Mostra rapidamente para o renderizador
            
            // Configurações da biblioteca HTML2PDF
            var opt = {
                margin:       0,
                filename:     `Certificado_${nomeAluno.replace(/\s+/g, '_')}.pdf`,
                image:        { type: 'jpeg', quality: 0.98 },
                html2canvas:  { scale: 2, logging: false },
                jsPDF:        { unit: 'px', format: [1123, 794], orientation: 'landscape' } // A4 Landscape sizes
            };

            // Gera o PDF e faz o Download
            html2pdf().set(opt).from(element).save().then(() => {
                element.style.display = 'none'; // Esconde de volta
                alert("O Download do seu Certificado começou! Procure nos arquivos do seu celular ou computador.");
            });
        }

        // NAVEGAÇÃO DE MENU
        function toggleMenu() { document.getElementById('sidebar').classList.toggle('open'); }
        function switchTab(tabId) {
            document.querySelectorAll('.module-section').forEach(el => el.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
            document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById('nav-' + tabId).classList.add('active');
            window.scrollTo(0, 0);
            if (window.innerWidth <= 768) { document.getElementById('sidebar').classList.remove('open'); }
        }
        function switchTabIfUnlocked(tabId, element) {
            if (!element.classList.contains('locked')) { switchTab(tabId); }
        }
    </script>
</body>
</html>
